"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const PreProcessorRegex_1 = require("./PreProcessorRegex");
class PreProcessorSub {
    constructor(subPairs, ignoreCase = true) {
        const searchFunc = (x) => x.normalize();
        const flags = ignoreCase ? "i" : "";
        // Create pre-processor list
        this.preProcessors = [];
        for (let subPair of subPairs) {
            // RegExp => String
            subPair = subPair.map((el) => {
                if (el instanceof RegExp) {
                    return el.source;
                }
                return el;
            });
            const [pattern, repl] = subPair;
            const pp = new PreProcessorRegex_1.PreProcessorRegex([pattern], searchFunc, repl, flags);
            this.preProcessors.push(pp);
        }
    }
    run(text) {
        for (const pp of this.preProcessors) {
            text = pp.run(text);
        }
        return text;
    }
    toString() {
        return this.preProcessors.map((el) => el.toString()).join(", ");
    }
}
exports.PreProcessorSub = PreProcessorSub;
